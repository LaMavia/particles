{"version":3,"sources":["ts/particle.ts","ts/vector.ts","ts/index.ts"],"names":[],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"ts.c6d8a778.map","sourceRoot":"../src","sourcesContent":["import { Vector } from \"./vector\";\r\n\r\nexport class Particle {\r\n  pos: Vector\r\n  m: number\r\n  r: number\r\n  v: Vector\r\n  a: Vector\r\n  ctx: CanvasRenderingContext2D\r\n  id: string\r\n  added: boolean\r\n  constructor(position: Vector, mass: number, a0: Vector, v0: Vector, ctx: CanvasRenderingContext2D, added: boolean = false, r: number = mass) {\r\n    this.pos = position\r\n    this.m = mass\r\n    this.r = r\r\n    this.a = a0\r\n    this.v = v0\r\n\r\n    this.ctx = ctx\r\n    this.id = (Math.random() * 10**12).toString(16)\r\n    this.added = added\r\n  }\r\n\r\n  applyVector(f: number[], dt: number) {\r\n    const hor = {\r\n      a: f[0]/this.m,\r\n      v: (f[0]/this.m)*(dt/1000)\r\n    }\r\n    const ver = {\r\n      a: f[1]/this.m,\r\n      v: (f[1]/this.m)*(dt/1000)\r\n    }\r\n\r\n    const a = [hor.a, ver.a]\r\n    const v = [hor.v, ver.v]\r\n    \r\n    this.a.add(a)\r\n    this.v.add(v)\r\n  }\r\n\r\n  update(state: {particles: Particle[]}, dt: number) {\r\n    state.particles.filter(x => x.id !== this.id).forEach(p => {\r\n      const f1 = Particle.calcForce(this, p)\r\n      this.applyVector(f1, dt)\r\n      const f2 = Particle.calcForce(p, this)\r\n      p.applyVector(f2, dt)\r\n      // const _a = (this.pos.h - p.pos.h)/(this.pos.v-p.pos.v)\r\n      \r\n          \r\n      if(this.pos.v === Infinity) this.pos.v = 0\r\n      if(this.pos.h === Infinity) this.pos.h = 0\r\n      \r\n      // console.log(this.pos.dist(p.pos.array))\r\n      if(this.pos.dist(p.pos.array) <= this.r/2 + p.r/2) {\r\n        state.particles.push(new Particle(\r\n          this.pos,\r\n          (this.m + p.m)/1.5,\r\n          this.a,\r\n          this.v,\r\n          this.ctx,\r\n          false,\r\n          (this.r + p.r) / 1.5\r\n        ))\r\n        \r\n        state.particles = state.particles.filter(x => x.id !== this.id && x.id !== p.id)\r\n        /*\r\n        this.a.mult([-1, -1])\r\n        this.v.mult([-1, -1])\r\n        \r\n        p.a.mult([-1, -1])\r\n        p.v.mult([-1, -1])\r\n        */\r\n      }\r\n      \r\n      if(this.pos.v - this.r/2 < 0 || this.pos.v + this.r/2 > this.ctx.canvas.height) {\r\n        this.a.mult([1, -1])\r\n        this.v.mult([1, -1])\r\n      }\r\n      \r\n      if(this.pos.h - this.r/2 < 0 || this.pos.h + this.r/2 > this.ctx.canvas.width) {\r\n        this.a.mult([-1, 1])\r\n        this.v.mult([-1, 1])\r\n      }\r\n    })\r\n    this.v.add(this.a.array.map(x => x/(dt*1000)))\r\n    this.pos.add(this.v.array.map(x => x*dt/1000))\r\n    if(this.added) debugger\r\n\r\n  }\r\n\r\n  draw(ctx: CanvasRenderingContext2D) {\r\n\r\n    ctx.beginPath()\r\n    ctx.arc(this.pos.h, this.pos.v, this.r, 0, Math.PI*2)\r\n    if(this.added) ctx.fillStyle = 'red'\r\n    else ctx.fillStyle = 'white'\r\n    ctx.fill()\r\n    ctx.closePath()\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Returns an array of forces [horizonal, vertical] with which particles work on each other\r\n   * @param p1 {Particle}\r\n   * @param p2 {Particle}\r\n   */\r\n  static calcForce(p1: Particle, p2: Particle): number[] {\r\n    function formula(M: number, m: number, r: number) {\r\n      return G*M*m/(r**2)\r\n    }\r\n    const G = 6.67 * (10**-8) \r\n    return [\r\n      -1*formula(p1.m, p2.m, p1.pos.h + p2.pos.h)*(p1.pos.h - p2.pos.h),\r\n      -1*formula(p1.m, p2.m, p1.pos.v + p2.pos.v)*(p1.pos.v - p2.pos.v)\r\n    ]\r\n  }\r\n}","export class Vector {\r\n  h: number\r\n  v: number\r\n\r\n  constructor(horizontal: number, vertical: number) {\r\n    this.h = horizontal\r\n    this.v = vertical\r\n  }\r\n\r\n  get horizontal() {\r\n    return this.h\r\n  }\r\n\r\n  get vertical() {\r\n    return this.v\r\n  }\r\n\r\n  get array() {\r\n    return [this.h, this.v]\r\n  }\r\n\r\n  dist([x2, y2]: number[]) {\r\n    const [x1, y1] = this.array\r\n    const xl = x1 - x2\r\n    const yl = y1 - y2\r\n    return Math.sqrt(xl**2 + yl**2)\r\n  }\r\n\r\n  static dist([x1, y1]: number[], [x2, y2]: number[]) {\r\n    const xl = x1 + x2\r\n    const yl = y1 + y2\r\n    return Math.sqrt(xl**2 + yl**2)\r\n  }\r\n\r\n  add(array: number[]) {\r\n    this.h += array[0]\r\n    this.v += array[1]\r\n  }\r\n\r\n  scale(n: number) {\r\n    this.h *= n\r\n    this.v *= n\r\n  }\r\n\r\n  mult([h, v]: number[]) {\r\n    this.h *= h\r\n    this.v *= v\r\n  }\r\n}","import { Particle } from \"./particle\";\r\nimport { Vector } from \"./vector\";\r\ninterface S {\r\n  particles: Particle[]\r\n}\r\n(() => {\r\n  const ctx = (document.getElementById('canvas') as HTMLCanvasElement).getContext(\"2d\")\r\n  const state = {\r\n    particles: []\r\n  }\r\n   \r\n  const fr = 1000/60\r\n  let k = 1\r\n  let x = 0, y = 0\r\n\r\n  function rand(max, min) {\r\n    return Math.random() * (max - min) + min\r\n  }\r\n\r\n  function handleClick(e: MouseEvent) {\r\n    state.particles.push(new Particle(\r\n      new Vector(e.clientX/k, e.clientY/k),\r\n      10**11,\r\n      new Vector(rand(1, -1), rand(1, -1)),\r\n      new Vector(rand(1, -1), rand(1, -1)),\r\n      ctx,\r\n      true,\r\n      5\r\n    ))\r\n  }\r\n\r\n  function handleKey(e: KeyboardEvent) {\r\n    switch(e.keyCode) {\r\n      case 107: k = 2;break;\r\n      case 109: k = 1;break;\r\n      default:;break;\r\n    }\r\n  }\r\n\r\n  function setup() {\r\n    ctx.canvas.width = window.innerWidth\r\n    ctx.canvas.height = window.innerHeight\r\n    ctx.canvas.addEventListener('click', handleClick, {passive: true})\r\n    window.addEventListener('keyup', handleKey, {passive: true})\r\n    // ctx.canvas.addEventListener('mousemove', e => {\r\n    //   x = ctx.canvas.width-e.clientX*1.3\r\n    //   y = ctx.canvas.width-e.clientY*1.3\r\n    // })\r\n\r\n    const v = 3, a = 4 \r\n\r\n    for(let i = 0; i < 0; i++) {\r\n      state.particles.push(new Particle(\r\n        new Vector(rand(ctx.canvas.width, 1), rand(ctx.canvas.height, 1)), \r\n        1,\r\n        new Vector(rand(a, -a), rand(a, -a)),\r\n        new Vector(rand(v, -v), rand(v, -v)),\r\n        ctx\r\n      ))\r\n    }\r\n \r\n    setTimeout(loop, fr)\r\n  }\r\n\r\n  function loop() {\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n    state.particles.forEach(p => {\r\n      ctx.save()\r\n      ctx.translate(x,y)\r\n      ctx.scale(k,k)\r\n      // console.log(particles.length)\r\n      // @ts-ignore\r\n      p.update(state, fr)\r\n      p.draw(ctx)\r\n      ctx.restore()\r\n    })\r\n    \r\n    setTimeout(loop, fr)\r\n  }\r\n\r\n\r\n  setup()\r\n})()"]}