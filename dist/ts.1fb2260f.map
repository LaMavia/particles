{"version":3,"sources":["ts/vector.ts","ts/particle.ts","ts/index.ts"],"names":[],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"ts.1fb2260f.map","sourceRoot":"../src","sourcesContent":["export class Vector {\r\n  h: number\r\n  v: number\r\n\r\n  constructor(horizontal: number, vertical: number) {\r\n    this.h = horizontal\r\n    this.v = vertical\r\n  }\r\n\r\n  get horizontal() {\r\n    return this.h\r\n  }\r\n\r\n  get vertical() {\r\n    return this.v\r\n  }\r\n\r\n  get array() {\r\n    return [this.h, this.v]\r\n  }\r\n\r\n  dist([x2, y2]: number[]) {\r\n    const [x1, y1] = this.array\r\n    const xl = x1 - x2\r\n    const yl = y1 - y2\r\n    return Math.sqrt(xl**2 + yl**2)\r\n  }\r\n\r\n  static dist([x1, y1]: number[], [x2, y2]: number[]) {\r\n    const xl = x1 + x2\r\n    const yl = y1 + y2\r\n    return Math.sqrt(xl**2 + yl**2)\r\n  }\r\n\r\n  add(array: number[]) {\r\n    this.h += array[0]\r\n    this.v += array[1]\r\n    \r\n    return this\r\n  }\r\n\r\n  scale(n: number) {\r\n    this.h *= n\r\n    this.v *= n\r\n\r\n    return this\r\n  }\r\n\r\n  mult([h, v]: number[]) {\r\n    this.h *= h\r\n    this.v *= v\r\n\r\n    return this\r\n  }\r\n\r\n  static negV(v: Vector) {\r\n    return new Vector(-v.horizontal, -v.vertical)\r\n  }\r\n\r\n  static negA(v: number[]) {\r\n    return v.map(x => x*-1)\r\n  }\r\n\r\n  static AddA(...xs) {\r\n    const a = xs.reduce((s, x) => [s[0]+x[0], s[1]+x[1]], [0, 0])\r\n    return new Vector(a[0], a[1])\r\n  }\r\n}","import { Vector } from \"./vector\";\r\n\r\nexport class Particle { \r\n  pos: Vector\r\n  m: number\r\n  r: number\r\n  v: Vector\r\n  a: Vector\r\n  ctx: CanvasRenderingContext2D\r\n  id: string\r\n  added: boolean\r\n  constructor(position: Vector, mass: number, a0: Vector, v0: Vector, ctx: CanvasRenderingContext2D, added: boolean = false, r: number = mass) {\r\n    this.pos = position\r\n    this.m = mass\r\n    this.r = r\r\n    this.a = a0\r\n    this.v = v0\r\n\r\n    this.ctx = ctx\r\n    this.id = (Math.random() * 10**12).toString(16)\r\n    this.added = added\r\n  }\r\n\r\n  applyForce(f: number[], dt: number) {\r\n    dt = dt/1000\r\n    const a = f.map(x => x/this.m)\r\n    this.a.add(a)\r\n    \r\n    const v = this.a.array.map(x => x*dt)\r\n    this.v.add(v)\r\n    \r\n    this.pos.add(this.v.array.map(x => x*dt))\r\n  }\r\n\r\n  update(state: {particles: Particle[]}, dt: number) { \r\n    let abort = false\r\n    const others = state.particles.filter(x => x.id !== this.id)\r\n    const Fw = others.reduce((f, p) => {\r\n      if(abort) return f\r\n      const [x, y] = Particle.calcForce(this, p)\r\n      const d = p.pos.dist(this.pos.array)\r\n      if(d < this.r + p.r) {\r\n        const mom1 = this.v.scale(this.m)\r\n        const mom2 = p.v.scale(p.m)\r\n        const nv = (mom1.add(mom2.array).scale(1/(this.m+p.m)))\r\n\r\n        const np = new Particle(\r\n          this.pos,\r\n          this.m + p.m,\r\n          new Vector(0, 0),\r\n          new Vector(0, 0),\r\n          this.ctx,\r\n          false,\r\n          (Math.sqrt(this.r**2 + p.r**2))\r\n        )\r\n        console.log(np)\r\n        state.particles.push(np)\r\n        state.particles = state.particles\r\n          .filter(x => !(x.id === this.id || x.id === p.id))\r\n        \r\n        abort = true\r\n        return f\r\n      }\r\n      return [\r\n        f[0] + x,\r\n        f[1] + y\r\n      ]\r\n    }, [0, 0])\r\n\r\n    \r\n\r\n    // if(abort) return\r\n    // if(this.added) console.table(Fw)\r\n\r\n    this.applyForce(Fw, dt)\r\n    \r\n    // Wall hit detection\r\n    const hitScalar = 0.8\r\n    if(this.pos.h + this.r > this.ctx.canvas.width ||\r\n      this.pos.h - this.r < 0 ) {\r\n        this.v.mult([-hitScalar, hitScalar])\r\n        this.a.mult([-hitScalar, hitScalar])\r\n      }\r\n\r\n    if(this.pos.v + this.r > this.ctx.canvas.height ||\r\n      this.pos.v - this.r < 0 ) {\r\n        this.v.mult([hitScalar, -hitScalar])\r\n        this.a.mult([hitScalar, -hitScalar])\r\n      }\r\n  }\r\n\r\n  draw(ctx: CanvasRenderingContext2D) {\r\n\r\n    ctx.beginPath()\r\n    ctx.arc(this.pos.h, this.pos.v, this.r, 0, Math.PI*2)\r\n    if(this.added) ctx.fillStyle = 'red'\r\n    else ctx.fillStyle = 'white'\r\n    ctx.fill()\r\n    ctx.closePath()\r\n\r\n  }\r\n\r\n  static calcDist(p1: Particle, p2: Particle) {\r\n    const s = Math.sign(p1.pos.h - p2.pos.h) * \r\n      Math.sign(p1.pos.v - p2.pos.v)\r\n    return s * p1.pos.dist(p2.pos.array)\r\n  }\r\n\r\n  /**\r\n   * Returns an array of angles [p1, p2]\r\n   */\r\n  static calcAngle(p1: Particle, p2: Particle) {\r\n    const h = Math.abs(p1.pos.h - p2.pos.h) \r\n    const v = Math.abs(p1.pos.v - p2.pos.v)\r\n\r\n    return Math.atan(v/h)\r\n  }\r\n\r\n  static calcRatio(p1: Particle, p2: Particle) {\r\n    const b = Math.abs(p1.pos.h - p2.pos.h) || 1\r\n    const a = Math.abs(p1.pos.v - p2.pos.v) || 1\r\n    return [a/b, b/a]\r\n  }\r\n\r\n  /**\r\n   * Returns an array of forces [horizonal, vertical] with which particles work on each other\r\n   * @param p1 {Particle}\r\n   * @param p2 {Particle}\r\n   */\r\n  static calcForce(p1: Particle, p2: Particle): number[] {\r\n    function formula(M: number, m: number, r: number) {\r\n      return G*M*m/(r**2)\r\n    }\r\n    const G = 6.67 * (10**-5);\r\n    const d = Particle.calcDist(p1, p2)\r\n    const f = formula(p1.m, p2.m, d)\r\n    const th = Particle.calcAngle(p1 ,p2)\r\n    return [\r\n      -(Math.sign(p1.pos.h - p2.pos.h))*f*Math.cos(th),\r\n      -(Math.sign(p1.pos.v - p2.pos.v))*f*Math.sin(th),\r\n    ]\r\n  }\r\n}","import { Particle } from \"./particle\";\r\nimport { Vector } from \"./vector\";\r\ninterface S {\r\n  particles: Particle[]\r\n}\r\n(() => {\r\n  const ctx = (document.getElementById('canvas') as HTMLCanvasElement).getContext(\"2d\")\r\n  const state = {\r\n    particles: [] as Particle[]\r\n  }\r\n   \r\n  const fr = 1000/60\r\n  let k = 1\r\n  let x = 0, y = 0\r\n\r\n  function rand(max: number, min: number) {\r\n    return Math.random() * (max - min) + min\r\n  }\r\n\r\n  function handleClick(e: MouseEvent) {\r\n    state.particles.push(new Particle(\r\n      new Vector(e.clientX/k, e.clientY/k),\r\n      10**11,\r\n      new Vector(0, 0),\r\n      new Vector(0, 0),\r\n      ctx,\r\n      true,\r\n      5\r\n    ))\r\n  }\r\n\r\n  function handleKey(e: KeyboardEvent) {\r\n    switch(e.keyCode) {\r\n      case 107: k = 2;break;\r\n      case 109: k = 1;break;\r\n      case 83: console.log(state);break;\r\n      default:;break;\r\n    }\r\n  }\r\n\r\n  function setup() {\r\n    ctx.canvas.width = window.innerWidth\r\n    ctx.canvas.height = window.innerHeight\r\n    ctx.canvas.addEventListener('click', handleClick, {passive: true})\r\n    window.addEventListener('keyup', handleKey, {passive: true})\r\n    // ctx.canvas.addEventListener('mousemove', e => {\r\n    //   x = ctx.canvas.width-e.clientX*1.3\r\n    //   y = ctx.canvas.width-e.clientY*1.3\r\n    // })\r\n\r\n    const v = 3, a = 4 \r\n\r\n    for(let i = 0; i < 200; i++) {\r\n      state.particles.push(new Particle(\r\n        new Vector(rand(ctx.canvas.width, 1), rand(ctx.canvas.height, 1)), \r\n        10**3,\r\n        new Vector(0, 0),\r\n        new Vector(0, 0),\r\n        ctx,\r\n        false,\r\n        1\r\n      ))\r\n    }\r\n \r\n    setTimeout(loop, fr)\r\n  }\r\n\r\n  function loop() {\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\r\n    state.particles.forEach(p => {\r\n      ctx.save()\r\n      ctx.translate(x,y)\r\n      ctx.scale(k,k)\r\n      // console.log(particles.length)\r\n      // @ts-ignore\r\n      p.update(state, fr)\r\n      p.draw(ctx)\r\n      ctx.restore()\r\n    })\r\n    \r\n    setTimeout(loop, fr)\r\n  }\r\n\r\n\r\n  setup()\r\n})()"]}